language: java
jdk: oraclejdk8

install:
  - "sudo apt-get purge openjdk*"
  - "sudo add-apt-repository -y ppa:webupd8team/java"
  - "sudo apt-get update"
  - "sudo apt-get install oracle-java8-installer"

before_deploy:
  - ./gradlew assemble

os:
  - linux

after_success:
  - pwd
  - ls -l build

notifications:
  irc:
    channels: chat.freenode.net#bitsquare
    template:
      - '%{message} (%{repository}#%{build_number}, %{duration})'
      - '%{repository}/%{branch} %{commit} %{author}: %{commit_message}'
      - '%{build_url}'
    on_success: change
    on_failure: always
    use_notice: true
    skip_join: true

deploy:
  provider: releases
  api_key:
    secure: PyA8sGzvjlYJSqh3V4bO9pBhiMMJ2OwClkJS/gunsscCmX3T9FRbx8ueutpOxRRFtapS50l+SB7qwq+X63EqTMGMOf8h59uul2ktA5wHJX+G8l4rtLa9yLnJM8tU3IL5e7Banm8d7VcLSVYVcpC/buI+Z1yh8o7ldB87b1E8E24=
  file: build/distributions/bitsquare-0.1.0-SNAPSHOT.deb
  on:
    repo: bitsquare/bitsquare
    branch: native
